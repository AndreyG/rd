import com.jetbrains.rd.gradle.tasks.RunCmdTask
import com.jetbrains.rd.gradle.tasks.RunExecTask
import static com.jetbrains.rd.gradle.tasks.CrossTaskKt.*

task buildRdCpp(type: RunCmdTask) {
    workingDir '.'
    execPath = 'build.cmd'
}

task buildRdCppTest(type: RunCmdTask, dependsOn: [':generateEverything']) {
    workingDir '.'
    execPath 'buildtest.cmd'
}

task clean(type: Delete) {
    delete "$cppRoot/build/"
}

task CrossTestCppClientAllEntities(type: RunExecTask, dependsOn: ['buildRdCppTest']) {
    workingDir 'build/src/rd_gen_cpp/test/cross_test/Release/'
    execPath 'cross_test_client_all_entities'
    args getTmpFilePath(it)
}